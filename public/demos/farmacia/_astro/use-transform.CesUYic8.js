import{i as y,u as a,a as d,M as p,b as h,f as A,c as C,d as f}from"./proxy.CtxVW3C9.js";import{r as i}from"./index.WFquGv8Z.js";function V(...t){const n=!Array.isArray(t[0]),e=n?0:-1,o=t[0+e],s=t[1+e],r=t[2+e],c=t[3+e],u=y(s,r,c);return n?u(o):u}function x(t){const n=a(()=>d(t)),{isStatic:e}=i.useContext(p);if(e){const[,o]=i.useState(t);i.useEffect(()=>n.on("change",o),[])}return n}function m(t,n){const e=x(n()),o=()=>e.set(n());return o(),h(()=>{const s=()=>A.preRender(o,!1,!0),r=t.map(c=>c.on("change",s));return()=>{r.forEach(c=>c()),C(o)}}),e}function E(t){f.current=[],t();const n=m(f.current,t);return f.current=void 0,n}function M(t,n,e,o){if(typeof t=="function")return E(t);if(e!==void 0&&!Array.isArray(e)&&typeof n!="function")return b(t,n,e,o);const c=typeof n=="function"?n:V(n,e,o);return Array.isArray(t)?l(t,c):l([t],([u])=>c(u))}function l(t,n){const e=a(()=>[]);return m(t,()=>{e.length=0;const o=t.length;for(let s=0;s<o;s++)e[s]=t[s].get();return n(e)})}function b(t,n,e,o){const s=a(()=>Object.keys(e)),r=a(()=>({}));for(const c of s)r[c]=M(t,n,e[c],o);return r}export{M as u};
